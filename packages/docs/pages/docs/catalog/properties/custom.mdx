import '@composify/react/style.css';
import { PropertyControlCustom } from '@composify/react/editor';
import { useState } from 'react';

export const BasicUsage = () => {
  const [value, setValue] = useState('');

  return (
    <PropertyControlCustom
      name="example"
      spec={{
        type: 'custom',
        label: 'Image',
        render: (value, onChange) => (
          <>
            <style>
              {`
            .file-input {
              display: block;
              width: 100%;
              font-size: 0.875rem;
              line-height: 1.4;
              color: var(--docs-color-secondary);
              border: 1px solid var(--docs-color-outline);
              border-radius: 4px;
              cursor: pointer;
              background-color: var(--docs-color-surface-container-low);
              padding: 0;
            }

            .file-input::file-selector-button {
              margin-right: 16px;
              padding: 8px 16px;
              border: 0;
              border-top-left-radius: 4px;
              border-bottom-left-radius: 4px;
              font-size: 0.875rem;
              line-height: 1.4;
              font-weight: 600;
              background-color: var(--docs-color-secondary);
              color: white;
              cursor: pointer;
              transition: opacity 0.1s;
            }

            .file-input:hover::file-selector-button {
              opacity: 0.9;
            }
            `}
            </style>
            <input
              type="file"
              className="file-input"
              value={value}
              onChange={event => onChange(event.target.files?.[0].name ?? '')}
            />
          </>
        ),
      }}
      value={value}
      onChange={(_, next) => setValue(next)}
    />
  );
};

# Custom Property

When none of the built-in property types quite fit your needs, the **custom** property gives you the power to build your own control.
This gives you total flexibility — render anything from a file picker to a color slider to a full-blown form. 

:::code-group
<div data-title="Preview">
  <BasicUsage />
</div>

```tsx showLineNumbers [Code]
Catalog.register('Sample', {
  component: Sample,
  props: {
    counter: {
      label: 'Counter',
      type: 'custom',// [!code hl]
      render: (value, onChange) => (// [!code hl]
        <FileUploadInput value={value} onChange={onChange} />// [!code hl]
      ),// [!code hl]
    },
  },
});
```
:::

## Required Parameters

### `render`

A custom property requires a render `function`.
This function receives the current `value` of the prop and an `onChange` callback you can use to update it. 

Inside, you can return any React element — a button, a slider, or even a small form — and just wire up the `onChange` callback to pass back new values. 

```tsx showLineNumbers
Catalog.register('Sample', {
  component: Sample,
  props: {
    counter: {
      label: 'Counter',
      type: 'custom',
      render: (value, onChange) => (// [!code hl]
        <FileUploadInput value={value} onChange={onChange} />// [!code hl]
      ),// [!code hl]
    },
  },
});
```
